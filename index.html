<!DOCTYPE html>
<html>
<head>
    <script src="http://js.leapmotion.com/leap-0.6.4.min.js"></script>
</head>
<body>
	<h1>Test 3</h1>
	<div id = "output"></div>

</body>

<script type="text/javascript">

function concatData(id, data){
	return id + ": " + data + "<br>";
}

function getGest(fingers){
	if(fingers[0].extended){
		if(fingers[1].extended){
			if(fingers[2].extended){
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "Thumb Index Middle Ring Pinky";
					}else{
						return "Thumb Index Middle Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "Thumb Index Middle   Pinky";
					}else{
						return "Thumb Index Middle    ";
					}
				}
			}else{
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "Thumb Index   Ring Pinky";
					}else{
						return "Thumb Index   Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "Thumb Index     Pinky";
					}else{
						return "Thumb Index      ";
					}
				}
			}
		}else{
			if(fingers[2].extended){
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "Thumb   Middle Ring Pinky";
					}else{
						return "Thumb   Middle Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "Thumb   Middle   Pinky";
					}else{
						return "Thumb   Middle    ";
					}
				}
			}else{
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "Thumb   Middle Ring Pinky";
					}else{
						return "Thumb   Middle Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "Thumb   Middle   Pinky";
					}else{
						return "Thumb   Middle    ";
					}
				}
			}
		}
	}else{
		if(fingers[1].extended){
			if(fingers[2].extended){
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "	 Index Middle Ring Pinky";
					}else{
						return "	 Index Middle Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "	 Index Middle   Pinky";
					}else{
						return "	 Index Middle    ";
					}
				}
			}else{
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "	 Index   Ring Pinky";
					}else{
						return "	 Index   Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "	 Index     Pinky";
					}else{
						return "	 Index      ";
					}
				}
			}
		}else{
			if(fingers[2].extended){
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "	 	 Middle Ring Pinky";
					}else{
						return "	 	 Middle Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "	 	 Middle   Pinky";
					}else{
						return "	 	 Middle    ";
					}
				}
			}else{
				if(fingers[3].extended){
					if(fingers[4].extended){
						return "	 	 	 Ring Pinky";
					}else{
						return "	 	 	 Ring  ";
					}
				}else{
					if(fingers[4].extended){
						return "	 	 	 	 Pinky";
					}else{
						return "	 	 	 	 	";
					}
				}
			}
		}
	}
	return 
}

function getFingetName(fingerType){
	switch(fingerType) {
		case 0:
			return 'Thumb';
		break;

		case 1:
			return 'Index';
		break;

		case 2:
			return 'Middle';
		break;

		case 3:
			return 'Ring';
		break;

		case 4:
			return 'Pinky';
		break;
	}
}

function concatJointPosition(id, position){
	return id + ": " + position[0] + ", " + position[1] + ", " + position [2] + "<br>";
} 

var output = document.getElementById("output");
var frameString = "", handString = "", fingerString = "";
var hand, finger;

var options = { enableGestures: true };

Leap.loop(options, function(frame) {
	frameString = concatData("frame_id", frame.id);
	frameString += concatData("num_hands", frame.hands.length);
	frameString += concatData("num_fingers", frame.fingers.length);
	frameString += "<br>";

	for (var i = 0, len = frame.hands.length; i < len; i++){
		hand = frame.hands[i];
		handString = concatData("hand_type", hand.type);
		handString += concatData("pinch_strength", hand.pinchStrength);
		handString += concatData("grab_strength", hand.grabStrength);
		handString += concatData("confidence", hand.confidence);

		handString += "<br>";

		fingerString = ""
		for (var j = 0, len2 = hand.fingers.length; j < len2; j++){
			finger = hand.fingers[j];
			fingerString += concatData("finger_type", finger.type) + " (" + getFingetName(finger.type) + ") <br>";
			// fingerString += concatJointPosition("finger_dip", finger.dipPosition);
			// fingerString += concatJointPosition("finger_pip", finger.pipPosition);
			// fingerString += concatJointPosition("finger_mcp", finger.mcpPosition);
			if (finger.extended) {
			    fingerString += "extended";
			}else {
			    fingerString += "not extended";
			}
			fingerString += "<br>";
		}
		frameString += "<h1>" + getGest(hand.fingers) + "</h1>";
		frameString += "<br>";
		frameString += handString;
		frameString += fingerString;
	}

	output.innerHTML = frameString;


});

</script>
</html>